(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"56b4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("div",{staticClass:"q-px-xl"},[r("q-form",{on:{submit:e.onSubmit}},[r("q-input",{ref:"mobile",attrs:{placeholder:e.$t("registered_mobile_number"),label:e.$t("mobile"),rules:[function(t){return t&&t.length>0||e.$t("enter_correct_mobile")}],"lazy-rules":"",clearable:"",prefix:"+"+e.form.prefix},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"phone_android"}})]},proxy:!0}]),model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),r("q-input",{attrs:{type:"password",rules:[e.passwordRule],placeholder:e.$t("create_password"),label:e.$t("password"),clearable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"o_lock"}})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),r("q-input",{attrs:{type:"password",placeholder:e.$t("confirm_password"),label:e.$t("confirm_password"),rules:[function(t){return t&&t===e.form.password||e.$t("password_confirm_failed")}],clearable:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"check"}})]},proxy:!0}]),model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}}),r("q-input",{attrs:{placeholder:e.$t("verification_code"),label:e.$t("code")},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"o_insert_comment"}})]},proxy:!0},{key:"append",fn:function(){return[e.sending?e._e():r("q-btn",{staticClass:"q-px-sm",style:{width:e.loading.smsSend?"110px":"50px"},attrs:{unelevated:"",dense:"",color:"primary",label:e.$t("OTP"),disable:e.loading.smsSend,loading:e.loading.smsSend},on:{click:function(t){return t.stopPropagation(),e.sendCode(t)}},scopedSlots:e._u([{key:"loading",fn:function(){return[e._v("\n              "+e._s(e.$t("sending"))+"..."),r("q-spinner",{staticClass:"on-right",attrs:{size:"xs"}})]},proxy:!0}],null,!1,202462969)}),e.sending?r("span",{staticClass:"cursor-not-allowed text-body1 text-grey-5"},[e._v("\n            "+e._s(e.$t("try_again_seconds",{seconds:e.codeTimeout}))+"\n          ")]):e._e()]},proxy:!0}]),model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),r("q-input",{attrs:{type:"text",placeholder:e.$t("recommendation_code"),label:e.$t("referrer"),clearable:"",rules:[function(t){return t&&t.length>0||e.$t("field_required",{field:"referrer"})}]},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("q-icon",{attrs:{name:"o_admin_panel_settings"}})]},proxy:!0}]),model:{value:e.form.referrer,callback:function(t){e.$set(e.form,"referrer",t)},expression:"form.referrer"}}),r("q-checkbox",{attrs:{color:"primary",label:e.$t("i_agree_with_the")},model:{value:e.accept,callback:function(t){e.accept=t},expression:"accept"}},[r("span",{staticClass:"text-primary cursor-pointer",on:{click:function(t){t.stopPropagation(),e.fixed=!0}}},[e._v("\n          "+e._s(e.$t("privacy_policy"))+"\n        ")])]),r("q-btn",{staticClass:"full-width q-mt-lg",attrs:{color:"primary","no-caps":"",label:e.$t("register"),size:"lg",unelevated:"",type:"submit",loading:e.loading.register},scopedSlots:e._u([{key:"loading",fn:function(){return[r("q-spinner-hourglass",{staticClass:"on-left"}),e._v("\n          "+e._s(e.$t("loading"))+"...\n        ")]},proxy:!0}])}),r("q-btn",{staticClass:"full-width q-mt-lg",attrs:{unelevated:"",size:"lg",color:"grey",to:"/","no-caps":"",label:e.$t("back_home")}})],1)],1),r("agreement-dialog",{attrs:{"confirm-label":e.$t("accept"),"cancel-label":e.$t("decline"),"sub-title":e.subTitle,title:e.$t("terms_of_agreement"),content:e.agreement},on:{confirm:e.agreementConfirm},model:{value:e.fixed,callback:function(t){e.fixed=t},expression:"fixed"}})],1)},o=[],s=(r("ac1f"),r("5319"),r("96cf"),r("c973")),i=r.n(s),a=r("a474"),c={name:"RegisterPage",data:function(){return{accept:!0,fixed:!1,agreement:"",subTitle:"",confirmPassword:"",sending:!1,codeTimeout:59,form:{mobile:"",password:"",code:"",referrer:"",prefix:this.$store.state.common.prefix}}},computed:{loading:function(){return this.$store.getters["common/loadings"]}},methods:{agreementConfirm:function(e){this.accept=e},passwordRule:function(e){var t=6,r=32;return!(!e||e.length<t||e.length>r)||this.$t("login_password_rule",{min:t,max:r})},sendCode:function(){var e=this;if(this.$refs.mobile.validate(),this.$refs.mobile.hasError)return!1;this.tmpTime||(this.tmpTime=this.codeTimeout),Object(a["smsSend"])(this.form.mobile,"register").then((function(t){e.sending=!0;var r=setInterval((function(){e.codeTimeout>0?e.codeTimeout--:(e.codeTimeout=e.tmpTime,e.sending=!1,clearInterval(r))}),1e3)}))},onSubmit:function(){var e=this;return this.form.code?!0!==this.accept?(this.$q.notify({color:"warning",textColor:"white",icon:"warning",message:this.$t("accept_the_license")}),!1):void Object(a["register"])(this.form).then((function(t){t&&(e.$store.commit("member/login",t.userinfo),e.$router.replace({path:e.$route.query.redirect||"/"}))})).catch((function(t){201===t.code&&e.$q.dialog({title:"Confirm",message:e.$t("invalid_referral_code_continue"),cancel:!0,persistent:!0}).onOk((function(){e.form.referrer="",e.onSubmit()}))})):(this.$q.notify({color:"warning",textColor:"white",icon:"warning",message:this.$t("enter_correct_code")}),!1)}},created:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["agreement"])("register");case 2:r=t.sent,e.agreement=r.content,e.subTitle=r.subtitle,e.form.referrer=e.$q.localStorage.getItem(e.$config.key("referrer"));case 6:case"end":return t.stop()}}),t)})))()}},l=c,d=r("2877"),u=r("9989"),m=r("0378"),p=r("27f9"),f=r("0016"),g=r("9c40"),b=r("0d59"),_=r("8f8e"),h=r("9149"),$=r("eebe"),x=r.n($),w=Object(d["a"])(l,n,o,!1,null,null,null);t["default"]=w.exports;x()(w,"components",{QPage:u["a"],QForm:m["a"],QInput:p["a"],QIcon:f["a"],QBtn:g["a"],QSpinner:b["a"],QCheckbox:_["a"],QSpinnerHourglass:h["a"]})}}]);